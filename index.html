<html>
<head>
	<title>Terminal Test</title>
	<script language="JavaScript" type="text/javascript" src="termlib.js"></script>
	<script language="JavaScript" type="text/javascript" src="os_rc.js"></script>
	<script language="JavaScript" type="text/javascript" src="os_cmd.js"></script>
	<script language="JavaScript" type="text/javascript" src="os_shell.js"></script>
	<script language="JavaScript" type="text/javascript" src="os_kernel.js"></script>

<script language="JavaScript" type="text/javascript">
<!--

/*
  (c) Norbert Landsteiner 2003-2005
  mass:werk - media environments
  <http://www.masswerk.at>
*/

var tty;

var helpPage=[
	'%CS%+r Terminal Help %-r%n',
	'  This is just a tiny test for multiple terminals.',
	'  use one of the following commands:',
	'     clear .... clear the terminal',
	'     exit ..... close the terminal (or <ESC>)',
	'     id ....... show terminal\'s id',
	'     help ..... show this help page',
	'  other input will be echoed to the terminal.',
	' '
];

function termOpen(n) {
	console.log('open terminal...')
	if (!tty) {
		tty=new Terminal(
			{
				x: 220,
				y: 70,
				rows: 24,
				greeting: '%+r +++ Terminal #'+n+' ready. +++ %-r %n  boot OS ....%n',
				id: n,
				termDiv: 'termDiv'+n,
				crsrBlinkMode: true,
				handler: termHandler,
				exitHandler: termExitHandler,

			}
		);
		if (tty) {tty.open();krnlInit();}
	}
	else if (tty.closed) {
		tty.open();
	}
	else {
		tty.focus();
	}
}

function termHandler() {
	// called on <CR> or <ENTER>
	this.newLine();
	var cmd=this.lineBuffer;
	if (cmd!='') {
		if (cmd=='clear') {
			this.clear();
		}
		else if (cmd=='exit') {
			this.close();
		}
		else if (cmd=='help') {
			this.write(helpPage);
		}
		else if (cmd=='id') {
			this.write('terminal id: '+this.id);
		}
		else {
			this.type('You typed: '+cmd);
			this.newLine();
		}
	}
	this.prompt();
}

function termExitHandler() {
	// optional handler called on exit
	console.log('close terminal...')
}

//-->
</script>

<style type="text/css">

/* essential terminal styles */

.term {
	font-family: courier,fixed,swiss,sans-serif;
	font-size: 12px;
	color: #33d011;
	background: none;
}
.termReverse {
	color: #111111;
	background: #33d011;
}

/* other page styles */

body,p,a,td {
	font-family: courier,fixed,swiss,sans-serif;
	font-size: 12px;
	color: #cccccc;
}
.lh15 {
	line-height: 15px;
}
a,a:link,a:visited {
	text-decoration: none;
	color: #77dd11;
}
a:hover {
	text-decoration: underline;
	color: #77dd11;
}
a:active {
	text-decoration: underline;
	color: #dddddd;
}

a.termopen,a.termopen:link,a.termopen:visited {
	text-decoration: none;
	color: #77dd11;
	background: none;
}
a.termopen:hover {
	text-decoration: none;
	color: #222222;
	background: #77dd11;
}
a.termopen:active {
	text-decoration: none;
	color: #222222;
	background: #dddddd;
}

</style>
</head>


<body bgcolor="#222222" link="#77dd11" text="#cccccc" alink="#dddddd" vlink="#77dd11"
topmargin="0" bottommargin="0" leftmargin="0" rightmargin="0" marginheight="0" marginwidth="0">


<table border="0" cellspacing="20" cellpadding="0">
	<tr><td nowrap>
		 Terminal Test<br>&nbsp;
	</td></tr>
	<tr><td nowrap>
		<a href="javascript:termOpen(1)" onfocus="if(this.blur)this.blur();" onmouseover="window.status='terminal 1'; return true" onmouseout="window.status=''; return true" class="termopen">&gt; open terminal &nbsp;</a>
	</td></tr>

</table>

<div id="termDiv1" style="position:absolute; top:20px; left:100px;"></div>

</body>
<script > termOpen(1)</script>
</html>